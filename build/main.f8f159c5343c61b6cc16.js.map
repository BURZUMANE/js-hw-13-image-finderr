{"version":3,"sources":["webpack:///./js/services/apiService.js","webpack:///./js/makeGridItems.js","webpack:///./js/images.js","webpack:///./templates/image-list.hbs"],"names":["page","query","baseUrl","key","loader","this","incrementPage","requestParams","fetchImages","PNotify","closeAll","fetch","then","response","type","window","stackBottomRight","opts","title","text","stack","alert","showStackBottomRight","json","parsedResponse","hits","value","resetPage","makeGridItem","obj","container","document","createElement","classList","add","innerHTML","imageListTemplate","basicLightbox","require","refs","searchForm","querySelector","imageList","loadMore","grid","stats","addEventListener","e","preventDefault","inputValue","currentTarget","elements","imageService","searchQuery","querySelectorAll","msnry","remove","layout","clearListItems","images","appendedMarkUp","catch","error","console","warn","loadMoreBtnHandler","lightBoxHandle","arr","forEach","item","makeGridItems","push","append","imgLoad","imagesLoaded","appended","on","bind","Masonry","columnWidth","itemSelector","percentPosition","transitionDuration","target","nodeName","src","dataset","source","create","show","once","IntersectionObserver","observe","Handlebars","module","exports","template","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call"],"mappings":"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","file":"main.f8f159c5343c61b6cc16.js","sourcesContent":["import PNotify from '../../../node_modules/pnotify/dist/es/PNotify';\n\nexport default {\n    page:1,\n    query: 'KYIV',\n    baseUrl: 'https://pixabay.com/api/',\n    key: '?key=16010994-0c285aac962bcd44e77124ee2',\n    loader(){\n        this.incrementPage();\n        const requestParams = `&q=${this.query}&page=${this.page}&per_page=12`;\n        return this.baseUrl + this.key + requestParams\n    },\n    fetchImages(){\n        PNotify.closeAll();\n        const requestParams = `&q=${this.query}&page=${this.page}&per_page=12`;\n        return fetch(this.baseUrl + this.key + requestParams).then(\n            response => {\n                function showStackBottomRight(type) {\n                    if (typeof window.stackBottomRight === 'undefined') {\n                      window.stackBottomRight = {\n                        'dir1': 'up',\n                        'dir2': 'left',\n                        'firstpos1': 25,\n                        'firstpos2': 25\n                      };\n                    }\n                    var opts = {\n                      title: 'Over Here',\n                      text: \"Check me out. I'm in a different stack.\",\n                      stack: window.stackBottomRight\n                    };\n                    switch (type) {\n                      case 'error':\n                        opts.title = 'Oh No';\n                        opts.text = 'Watch out for that water tower!';\n                        opts.type = 'error';\n                        break;\n                      case 'info':\n                        opts.title = 'Breaking News';\n                        opts.text = 'Have you met Ted?';\n                        opts.type = 'info';\n                        break;\n                      case 'success':\n                        opts.title = 'Good News Everyone';\n                        opts.text = \"I've invented a device that bites shiny metal asses.\";\n                        opts.type = 'success';\n                        break;\n                    }\n                    PNotify.alert(opts);\n                  }\n                showStackBottomRight('success');\n                return response.json()}\n        ).then(parsedResponse => {\n            this.incrementPage()\n            return parsedResponse.hits;\n            \n        });\n    },\n    get searchQuery(){\n        return this.query;\n        \n    },\n    \n    set searchQuery(value){\n        this.query = value;\n    },\n    incrementPage(){\n        this.page +=1;\n    },\n    resetPage(){\n        this.page =1;\n    }\n}\n\n","import imageListTemplate from '../templates/image-list.hbs';\n\nconst makeGridItem = (obj) => {\n    const container = document.createElement('div');\n    container.classList.add('grid-item');\n    container.innerHTML = imageListTemplate(obj)\n\n    return container;\n}\n\nexport default makeGridItem;    ","import imageService from './services/apiService';\n// import spinner from './spinner';\nimport 'basiclightbox/dist/basicLightbox.min.css'\nimport Masonry from 'masonry-layout';\nimport imagesLoaded from 'imagesloaded';\nimport makeGridItems from './makeGridItems';\n\n// PROBLEM WITH IMPORT\nconst basicLightbox = require('basiclightbox');\n\nconst refs = {\n    searchForm: document.querySelector('#search-form'),\n    imageList: document.querySelector('#gallery'),\n    loadMore: document.querySelector('button[data-action=\"load-more\"]'),\n    grid: document.querySelector('.grid'),\n    stats: document.querySelector('.stats'),\n}\n\nrefs.searchForm.addEventListener('submit', searchFormSubmitHandler);\nrefs.loadMore.addEventListener('click', loadMoreBtnHandler);\n\n\nlet currentHeight = 0;\n\n// LOAD MORE\n\nfunction loadMoreBtnHandler() {\n    // spinner.show()\n    imageService.fetchImages().then(images => {\n        // spinner.hide();\n        appendedMarkUp(images);\n        refs.grid.addEventListener('click', lightBoxHandle)\n    }).catch(error => {\n        console.warn(error);\n    });\n}\n\nfunction searchFormSubmitHandler(e) {\n    e.preventDefault();\n    // spinner.show();\n    let inputValue = e.currentTarget.elements.query.value;\n    imageService.resetPage();\n    imageService.searchQuery = inputValue;\n    e.currentTarget.elements.query.value = '';\n    clearListItems();\n    imageService.fetchImages().then(images => {\n            appendedMarkUp(images);\n\n        })\n        .catch(error => {\n            console.warn(error);\n        })\n};\n\n// APPEND \n\nfunction appendedMarkUp(arr) {\n    const elements = []\n    arr.forEach((arr) => {\n        const item = makeGridItems(arr)\n        elements.push(item);\n\n    });\n    refs.grid.append(...elements);\n    const imgLoad = imagesLoaded('.grid');\n    msnry.appended(elements);\n    imgLoad.on('progress', msnry.layout.bind(msnry));\n}\n\n// REMOVE\n\nfunction clearListItems() {\n    const elements = document.querySelectorAll('.grid-item');\n    msnry.remove(elements);\n    msnry.layout();\n\n}\n\n\n// MASONRY\nconst msnry = new Masonry('.grid', {\n\n    columnWidth: '.grid-sizer',\n    itemSelector: '.grid-item',\n    percentPosition: true,\n    transitionDuration: '0.2s'\n});\n\n// element\n\nconst imgLoad = imagesLoaded('.grid');\n\nimgLoad.once('progress', () => {\n    msnry.layout();\n});\n\nfunction load(){\n    imageService.fetchImages().then(images => {\n        // spinner.hide();\n        appendedMarkUp(images);\n    }).catch(error => {\n        console.warn(error);\n    });\n}\n\n\nconst observer = new IntersectionObserver(loadMoreBtnHandler,{});\nobserver.observe(refs.loadMore);\n\n\n\nfunction lightBoxHandle(e){\n    if(e.target.nodeName !== 'UL') return;\n    const src = e.target.dataset.source;\n    const instance = basicLightbox.create(`\n    <img width=\"1400\" height=\"900\" class=\"box-image\"\n    src=\"${src}\">\n\t`)\n    instance.show();\n}","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"lihoto-card\\\">\\n    <img src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":14},\"end\":{\"line\":2,\"column\":30}}}) : helper)))\n    + \"\\\" alt=\\\"\\\" />\\n\\n    <ul class=\\\"stats\\\" data-source=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"largeImageURL\") || (depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":35},\"end\":{\"line\":4,\"column\":52}}}) : helper)))\n    + \"\\\">\\n        <li class=\\\"stats-item\\\">\\n            <i class=\\\"material-icons\\\">thumb_up</i>\\n            <span>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"likes\") || (depth0 != null ? lookupProperty(depth0,\"likes\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":7,\"column\":18},\"end\":{\"line\":7,\"column\":27}}}) : helper)))\n    + \"</span>\\n        </li>\\n        <li class=\\\"stats-item\\\">\\n            <i class=\\\"material-icons\\\">visibility</i>\\n            \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"views\") || (depth0 != null ? lookupProperty(depth0,\"views\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":11,\"column\":12},\"end\":{\"line\":11,\"column\":21}}}) : helper)))\n    + \"\\n        </li>\\n        <li class=\\\"stats-item\\\">\\n            <i class=\\\"material-icons\\\">comment</i>\\n            \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"comments\") || (depth0 != null ? lookupProperty(depth0,\"comments\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":15,\"column\":12},\"end\":{\"line\":15,\"column\":24}}}) : helper)))\n    + \"\\n        </li>\\n        <li class=\\\"stats-item\\\">\\n            <i class=\\\"material-icons\\\">cloud_download</i>\\n            \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"downloads\") || (depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":19,\"column\":12},\"end\":{\"line\":19,\"column\":25}}}) : helper)))\n    + \"\\n        </li>\\n    </ul>\\n</div>\";\n},\"useData\":true});"],"sourceRoot":""}